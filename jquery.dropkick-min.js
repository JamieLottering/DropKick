/**
 * DropKick 1.2
 *
 * Highly customizable <select> lists
 * https://github.com/robdel12/DropKick
 *
 * 2011 Jamie Lottering <http://github.com/JamieLottering>
 *                      <http://twitter.com/JamieLottering>
 *
*/!function(a,b,c){"use strict";var d=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/),e=!!d,f=e&&parseFloat(d[1])<7,g=navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i),h={},i=[],j={left:37,up:38,right:39,down:40,enter:13,tab:9,zero:48,z:90,last:221},k=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">','<a class="dk_toggle">','<span class="dk_label">{{ label }}</span>',"</a>",'<div class="dk_options">','<ul class="dk_options_inner">',"</ul>","</div>","</div>"].join(""),l='<li class="{{ current }} {{ disabled }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',m={startSpeed:400,theme:!1,changes:!1,syncReverse:!0,nativeMobile:!0},n=null,o=null,p=function(a,b,c){var e,f,g,h;e=a.attr("data-dk-dropdown-value"),f=a.text(),g=b.data("dropkick"),h=g.$select,h.val(e).trigger("change"),b.find(".dk_label").text(f),c=c||!1,!g.settings.change||c||g.settings.syncReverse||g.settings.change.call(h,e,f)},q=function(a){a.removeClass("dk_open"),n=null},r=function(c){var d=c.find(".dk_toggle"),e=c.find(".dk_options").outerHeight(),f=a(b).height()-d.outerHeight()-d.offset().top+a(b).scrollTop(),g=d.offset().top-a(b).scrollTop();return g>e?f>e:!0},s=function(a,b,c){var d=a.find(".dk_options_inner"),e=b.prevAll("li").outerHeight()*b.prevAll("li").length,f=d.scrollTop(),g=d.height()+d.scrollTop()-b.outerHeight();(c&&"keydown"===c.type||f>e||e>g)&&d.scrollTop(e)},t=function(a,b){var c=r(a);a.find(".dk_options").css({top:c?a.find(".dk_toggle").outerHeight()-1:"",bottom:c?"":a.find(".dk_toggle").outerHeight()-1}),n=a.toggleClass("dk_open"),s(a,a.find(".dk_option_current"),b)},u=function(a,b,c){b.find(".dk_option_current").removeClass("dk_option_current"),a.addClass("dk_option_current"),s(b,a,c)},v=function(b,c){var n,o,r,s,v,w,x,d=b.keyCode,e=c.data("dropkick"),f=String.fromCharCode(d),g=c.find(".dk_options"),h=c.hasClass("dk_open"),i=g.find("li"),k=c.find(".dk_option_current"),l=i.first(),m=i.last();switch(d){case j.enter:h?k.hasClass("disabled")||(p(k.find("a"),c),q(c)):t(c,b),b.preventDefault();break;case j.tab:h&&(p(k.find("a"),c),q(c));break;case j.up:o=k.prev("li"),h?o.length?u(o,c,b):u(m,c,b):t(c,b),b.preventDefault();break;case j.down:h?(n=k.next("li").first(),n.length?u(n,c,b):u(l,c,b)):t(c,b),b.preventDefault()}if(d>=j.zero&&d<=j.z){for(r=(new Date).getTime(),null===e.finder?(e.finder=f.toUpperCase(),e.timer=r):r>parseInt(e.timer,10)+1e3?(e.finder=f.toUpperCase(),e.timer=r):(e.finder=e.finder+f.toUpperCase(),e.timer=r),s=i.find("a"),v=0,w=s.length;w>v;v++)if(x=a(s[v]),0===x.html().toUpperCase().indexOf(e.finder)){p(x,c),u(x.parent(),c,b);break}c.data("dropkick",e)}},w=function(b){return a.trim(b).length>0?b:!1},x=function(b,c){var f,g,h,i,j,d=b.replace("{{ id }}",c.id).replace("{{ label }}",c.label).replace("{{ tabindex }}",c.tabindex),e=[];if(c.options&&c.options.length)for(g=0,h=c.options.length;h>g;g++)i=a(c.options[g]),j=0===g&&void 0!==i.attr("selected")&&void 0!==i.attr("disabled")?null:l.replace("{{ value }}",i.val()).replace("{{ current }}",w(i.val())===c.value?"dk_option_current":"").replace("{{ disabled }}",void 0!==i.attr("disabled")?"disabled":"").replace("{{ text }}",i.text()),e[e.length]=j;return f=a(d),f.find(".dk_options_inner").html(e.join("")),f};f||(c.documentElement.className=c.documentElement.className+" dk_fouc"),h.init=function(b){return b=a.extend({},m,b),this.each(function(){var n,p,c=a(this),d=c.find(":selected").first(),e=c.find("option"),f=c.data("dropkick")||{},h=c.attr("id")||c.attr("name"),j=b.width||c.outerWidth(),l=c.attr("tabindex")||"0",m=!1;return f.id?c:(f.settings=b,f.tabindex=l,f.id=h,f.$original=d,f.$select=c,f.value=w(c.val())||w(d.attr("value")),f.label=d.text(),f.options=e,m=x(k,f),m.find(".dk_toggle").css({width:j+"px"}),c.before(m).appendTo(m),m=a('div[id="dk_container_'+h+'"]').fadeIn(b.startSpeed),n=b.theme||"default",m.addClass("dk_theme_"+n),f.theme=n,f.$dk=m,c.data("dropkick",f),m.addClass(c.attr("class")),m.data("dropkick",f),i[i.length]=c,m.bind("focus.dropkick",function(){o=m.addClass("dk_focus")}).bind("blur.dropkick",function(){m.removeClass("dk_focus"),o=null}),g&&f.settings.nativeMobile&&m.addClass("dk_mobile"),f.settings.syncReverse&&c.on("change",function(b){var d=c.val(),e=a('a[data-dk-dropdown-value="'+d+'"]',m),g=e.text();m.find(".dk_label").text(g),f.settings.change&&f.settings.change.call(c,d,g),u(e.parent(),m,b)}),(c.attr("form")||c.closest("form").length)&&(p=c.attr("form")?a("#"+c.attr("form").replace(" ",", #")):c.closest("form"),p.on("reset",function(){c.dropkick("reset")})),void 0)})},h.theme=function(b){var c=a(this),d=c.data("dropkick"),e=d.$dk,f="dk_theme_"+d.theme;e.removeClass(f).addClass("dk_theme_"+b),d.theme=b},h.reset=function(){return this.each(function(){var b=a(this).data("dropkick"),c=b.$dk,d=a('a[data-dk-dropdown-value="'+b.value+'"]',c);!b.$original.eq(0).prop("selected")&&b.$original.eq(0).prop("selected",!0),c.find(".dk_label").text(b.label),u(d.parent(),c)})},h.setValue=function(b){var c=a(this).data("dropkick").$dk,d=a('.dk_options a[data-dk-dropdown-value="'+b+'"]',c);d.length?(p(d,c),u(d.parent(),c)):console.warn("There is no option with this value in the <select>")},h.refresh=function(){return this.each(function(){var b=a(this),c=b.data("dropkick"),d=c.$dk;c.settings.startSpeed=0,b.removeData("dropkick").insertAfter(d),d.remove(),b.dropkick(c.settings)})},a.fn.dropkick=function(a){if(!f){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof a||!a)return h.init.apply(this,arguments)}},a(function(){a(c).on(e?"mousedown":"click",".dk_options a",function(){var c=a(this),d=c.parents(".dk_container").first();return c.parent().hasClass("disabled")||(p(c,d),u(c.parent(),d),q(d)),!1}),a(c).bind("keydown.dk_nav",function(a){var b=null;n?b=n:o&&!n&&(b=o),b&&v(a,b)}),a(c).on("click",null,function(b){if(n&&0===a(b.target).closest(".dk_container").length)q(n);else if(a(b.target).is(".dk_toggle, .dk_label")){var c=a(b.target).parents(".dk_container").first();return c.hasClass("dk_open")?q(c):(n&&q(n),t(c,b)),!1}});var d="onwheel"in b?"wheel":"onmousewheel"in c?"mousewheel":"MouseScrollEvent"in b?"DOMMouseScroll MozMousePixelScroll":!1;d&&a(c).on(d,".dk_options_inner",function(a){var b=a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail;return e?(this.scrollTop-=Math.round(b/10),!1):b>0&&this.scrollTop<=0||0>b&&this.scrollTop>=this.scrollHeight-this.offsetHeight?!1:!0})})}(jQuery,window,document);